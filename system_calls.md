# System Calls

### fork

  - fork is an operation in which a process creates a copy of itself
  - The new process is referred to as the child process. The calling
    process is referred to as the parent process.
  - The parent process and the child process run in separate memory spaces.

Function Arguments: -

### stat

  - displays file or file system status
  - the status is information about the file, like ownership, permissions,
    sizes, access, modification and status change times ...

Function Arguments: const char path, struct stat buf

### kill

  - sends a signal to a process
  - The  default  signal for kill is TERM.
  - To list all available signals use -l or -L.
  - Particularly useful signals include HUP, INT, KILL, STOP, CONT, and 0.
  - A PID of -1 is special; it indicates all processes except
    the kill process itself and init.

Function Arguments: signal, process id

### mmap

  - mmap, munmap - map or unmap files or devices into memory
  - mmap() creates a new mapping in the `virtual address space` of the calling process.
    The starting address for the new mapping is specified in addr.  
    The length argument specifies the length of the mapping.

Function Arguments: size_t length, int prot, int flags, int fd, off_t offset

### chmod

  - change file mode bits
  - chmod changes the file mode bits of each given file according to mode, which
    can be either a symbolic representation of changes to make, or an octal number representing the bit pattern for the new mode bits.

Function Arguments: const char path, mode_t mode

### waitpid

  - wait for process to change state
  - All of these system  calls are used to wait for state changes in a child of the calling process, and obtain information about the
    child whose state has changed.  A state change is considered to be: the child terminated; the child was stopped by a signal; or  the
    child  was  resumed  by  a  signal.

Function Arguments: pid_t pid, int wstatus, int options

## System Calls Fail

### Fork()
- If Fork() fails no child process will be created
1. The system-imposed limit on the total number of pro-
   cesses under execution would be exceeded.  This limit
   is configuration-dependent.

### Execve()
- If Execve() fails it will return to the calling process
1. The number of bytes in the new process's argument list is larger than the system-imposed limit.
   This limit is specified by the sysctl(3) MIB variable KERN_ARGMAX.        

### unlink()
- If unlink() fails it does not unlink the file
1. Search permission is denied for a component of the path prefix, or write permission is
   denied on the directory  containing the directory entry to be removed.

### read()
1. File doesn't exist.

### mount()
1. Path is wrong.

### chmod()
1. Search permission is denied on a component of the path prefix.

### kill()
1. The process does not have permission to send the signal to any receiving process.

## Trap instruction
A trap instruction is a procedure call that synchronously transfers the control. It is a software interrupt generated by the user
program or by an error when the operating system is needed by it to perform the system calls or an operation.
Its used to switch from the user mode to the system to the kernel mode.

It's caused by division by zero or invalid memory access.
It's also the usual way to invoke a system call because those run with a higher priority than user code.
Handling is synchronous (so the user code is suspended and continues afterwards). In a sense they are "active" - most of the time,
the code expects the trap to happen and relies on this fact.
